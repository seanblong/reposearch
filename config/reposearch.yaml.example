# This is a comprehensive configuration file for the Reposearch application.
# Settings are loaded in the following order of precedence (least to highest):
#  - defaults
#  - config file
#  - environment variables
#  - command-line flags.
# You can uncomment and modify the values below to suit your needs.

# --- Provider Configuration (Required) ---

# Specifies the AI provider to use for embeddings and summarization.
# Supported values: "stub", "openai", "vertexai"
# Default: "stub"
# Env: REPOSEARCH_PROVIDER
#provider : "openai"

# API key for the selected provider.  It is recommended to use the environment
# variable, REPOSEARCH_PROVIDER_API_KEY, rather than hardcoding it here.
# Note: For vertexai you can use application default credentials instead of an API key.
# See: https://docs.cloud.google.com/docs/authentication/application-default-credentials#personal
# Env: REPOSEARCH_PROVIDER_API_KEY
#providerApiKey: "your-api-key-here"

# The project ID of your OpenAI API key or the Google Cloud project.
# Env: REPOSEARCH_PROVIDER_PROJECT_ID
#providerProjectID: "your-gcp-project-id"

# The location/region for the Google Cloud services.  OpenAI doesn't use this setting.
# Default: "us-central1"
# Env: REPOSEARCH_PROVIDER_LOCATION
#providerLocation: "us-central1"

# --- Provider Model Overrides (Optional) ---

# The specific model to use for generating text embeddings.
# If commented out, a default model for the provider will be used.
# e.g., for openai: "text-embedding-3-small", for vertexai: "text-embedding-005"
# Env: REPOSEARCH_PROVIDER_EMBEDDING_MODEL
#providerEmbedModel: "text-embedding-3-small"

# The specific model to use for generating code summaries.
# If commented out, a default model for the provider will be used.
# e.g., for openai: "gpt-4o-mini", for google: "gemini-2.0-flash"
# Env: REPOSEARCH_PROVIDER_SUMMARY_MODEL
#providerSummaryModel: "gpt-4o-mini"

# The dimensionality of the embedding vectors.  A default is automatically set based
# on the selected embedding model, so this setting is usually not needed, but can
# be used if a non-default dimension is required.
# e.g., OpenAI's text-embedding-3-small is 1536, Google's embedding-001 is 768.
# Env: REPOSEARCH_PROVIDER_EMBED_DIM
#providerEmbedDim: 1536

# --- Database Configuration (Required) ---

# The connection URL (DSN) for the PostgreSQL database.
# Must have the pgvector extension enabled.
# Default: "postgres://postgres:postgres@localhost:5432/intent?sslmode=disable"
# Env: REPOSEARCH_DB_URL
database: "postgres://postgres:postgres@localhost:5432/reposearch?sslmode=disable"

# --- Git & Repository Configuration (Required) ---

# You can either index a local repository by specifying REPOSEARCH_REPO_ROOT,
# or provide a Git URL to clone via REPOSEARCH_GIT_REPO.

# The URL of the Git repository to clone and index.
# Env: REPOSEARCH_GIT_REPO
#gitRepo: "https://github.com/your-org/your-repo.git"

# The local file path to the root of the repository you want to index.  If a URL
# is provided then this is discarded.
# Default: "."
# Env: REPOSEARCH_GIT_ROOT
#gitRoot: "/path/to/local/repo"

# A GitHub API token.
# Required for cloning private repositories or to avoid rate limiting on public ones.
# Env: REPOSEARCH_GITHUB_TOKEN
#githubToken: "your-github-personal-access-token"

# The Git reference (branch, tag, or commit SHA) to check out and index.
# Default: "main"
# Env: REPOSEARCH_GIT_REF
#gitRef: "develop"

# --- Application Configuration ---

# The logging level for the application.
# Supported values: "debug", "info", "warn", "error"
# Default: "info"
# Env: REPOSEARCH_LOG_LEVEL
logLevel: "info"

# The port for the API server to listen on.
# Default: 8080
# Env: REPOSEARCH_API_PORT
port: 8080

# --- Authentication Configuration ---
auth:
  # Enable or disable GitHub authentication
  # Env: REPOSEARCH_AUTH_ENABLED
  enabled: false

  # JWT secret for signing tokens
  # Env: REPOSEARCH_AUTH_JWT_SECRET
  #jwtSecret: "your-jwt-secret"

  # GitHub OAuth App Client ID
  # Env: REPOSEARCH_AUTH_GITHUB_CLIENT_ID
  #githubClientID: "your-github-client-id"

  # GitHub OAuth App Client Secret
  # Env: REPOSEARCH_AUTH_GITHUB_CLIENT_SECRET
  #githubClientSecret: "your-github-client-secret"

  # OAuth Redirect URL
  # Env: REPOSEARCH_AUTH_GITHUB_REDIRECT_URL
  #redirectURL: "http://localhost:8080/auth/callback"

  # Allowed GitHub Organization for user access
  # Env: REPOSEARCH_AUTH_GITHUB_ALLOWED_ORG
  #githubAllowedOrg: "your-github-allowed-org"
